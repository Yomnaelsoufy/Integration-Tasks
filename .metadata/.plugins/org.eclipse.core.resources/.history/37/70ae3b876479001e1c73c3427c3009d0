package com.example.main.api.router;

import org.apache.camel.builder.RouteBuilder;
import org.springframework.stereotype.Component;

import com.mysql.cj.jdbc.MysqlDataSource;

@Component
public class FourthServiceRouter extends RouteBuilder {

    @Override
    public void configure() throws Exception {
        MysqlDataSource datasource = new MysqlDataSource();
        datasource.setUrl("jdbc:mysql://localhost:3306/NafathDB");
        datasource.setUser("root");
        datasource.setPassword("hanaaElshamy1");

        getContext().getRegistry().bind("myDataSource", datasource); 

        from("direct:fourthService")
        .setBody(simple("INSERT INTO nafathInfo (poinum, poitype, mobilenum) VALUES (${header.IDNumber}, ${header.IDType}, ${header.mobileNumber})"))
        .log("{$body}")
        .to("jdbc:myDataSource")
        .log("Data inserted successfully into nafathtable")
        .end();


    }
}
