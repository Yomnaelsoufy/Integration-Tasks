package com.example.main.api.router;

import org.apache.camel.builder.RouteBuilder;
import org.springframework.stereotype.Component;

import com.mysql.cj.jdbc.MysqlDataSource;

@Component
public class FourthServiceRouter extends RouteBuilder {

    @Override
    public void configure() throws Exception {
        MysqlDataSource datasource = new MysqlDataSource();
        datasource.setUrl("jdbc:mysql://localhost:3306/dbschema");
        datasource.setUser("root");
        datasource.setPassword("hanaaElshamy1");

        getContext().getRegistry().bind("myDataSource", datasource); 

        from("direct:fourthService")
        .setBody(constant("INSERT INTO nafathtable (PoiNum, PoiType, MobileNumber) VALUES ('533476333', 'IQA', '56765874')"))
        .to("jdbc:myDataSource")
        .log("Data inserted successfully into nafathtable")
        .end();
    }
}
//            .setBody(constant("{\"id\": \"1081871111\", \"action\": \"SpRequest\", \"service\":\"Login\" }"))
//            .log("fourth req: ${body}")    
//            .setHeader(Exchange.HTTP_METHOD, constant("POST"))
//            .to("http://localhost:8086/v1/nafath-app/id-verification/initiate?bridgeEndpoint=true");
   
